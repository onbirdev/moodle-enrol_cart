{"version":3,"file":"instance.min.js","sources":["../src/instance.js"],"sourcesContent":["import $ from 'jquery';\n\nconst showPayable = (payable) => {\n    let html = '<span class=\"bold text-danger\">--</span>';\n    const currencyName = $('#id_currency option:selected').text();\n\n    if (typeof payable === 'number' && payable >= 0) {\n        html =\n            '<span class=\"currency bold text-success\"><span>' +\n            currencyName +\n            '</span> &nbsp;' +\n            payable.toLocaleString() +\n            '</span>';\n    }\n\n    $('#fitem_id_payable .form-control-static').html(html);\n};\nconst calcPayable = () => {\n    let cost = $('#id_cost').val();\n    const discountType = Number($('#id_customint1').val());\n    let discountAmount = Number($('#id_customchar1').val());\n    let payable = '';\n\n    if ((cost = Number(cost))) {\n        if (!discountType) {\n            payable = cost;\n        }\n\n        if (discountType === 10 && discountAmount >= 0 && discountAmount <= 100) {\n            discountAmount = (discountAmount * cost) / 100;\n            payable = cost - discountAmount;\n        }\n\n        if (discountType === 20 && cost >= discountAmount) {\n            payable = cost - discountAmount;\n        }\n    }\n\n    showPayable(payable);\n};\n\nconst toggleDiscountAmount = () => {\n    const discountType = $('#id_customint1').val();\n    $('#id_customchar1').attr('disabled', !(discountType == 10 || discountType == 20));\n};\n\nexport const init = () => {\n    $(document).on('change', '#id_customint1', toggleDiscountAmount);\n    $(document).on('change', '#id_cost, #id_customint1, #id_customchar1', calcPayable);\n    $(document).on('keyup', '#id_cost, #id_customchar1', calcPayable);\n\n    toggleDiscountAmount();\n    calcPayable();\n};\n"],"names":["calcPayable","cost","val","discountType","Number","discountAmount","payable","html","currencyName","text","toLocaleString","showPayable","toggleDiscountAmount","attr","document","on"],"mappings":"iOAiBMA,YAAc,SACZC,MAAO,mBAAE,YAAYC,YACnBC,aAAeC,QAAO,mBAAE,kBAAkBF,WAC5CG,eAAiBD,QAAO,mBAAE,mBAAmBF,OAC7CI,QAAU,IAETL,KAAOG,OAAOH,SACVE,eACDG,QAAUL,MAGO,KAAjBE,cAAuBE,gBAAkB,GAAKA,gBAAkB,MAChEA,eAAkBA,eAAiBJ,KAAQ,IAC3CK,QAAUL,KAAOI,gBAGA,KAAjBF,cAAuBF,MAAQI,iBAC/BC,QAAUL,KAAOI,iBAhCRC,CAAAA,cACbC,KAAO,iDACLC,cAAe,mBAAE,gCAAgCC,OAEhC,iBAAZH,SAAwBA,SAAW,IAC1CC,KACI,kDACAC,aACA,iBACAF,QAAQI,iBACR,+BAGN,0CAA0CH,KAAKA,OAuBjDI,CAAYL,UAGVM,qBAAuB,WACnBT,cAAe,mBAAE,kBAAkBD,0BACvC,mBAAmBW,KAAK,aAA8B,IAAhBV,cAAsC,IAAhBA,8BAG9C,yBACdW,UAAUC,GAAG,SAAU,iBAAkBH,0CACzCE,UAAUC,GAAG,SAAU,4CAA6Cf,iCACpEc,UAAUC,GAAG,QAAS,4BAA6Bf,aAErDY,uBACAZ"}